---
title: Database (Postgres + pgvector)
description: The tables and indexes UnRAG expects (you run migrations).
---

UnRAG assumes **Postgres + pgvector**. You manage migrations yourself (SQL, Drizzle, Prisma, etc.).

## 1) Enable pgvector

```sql
create extension if not exists vector;
```

## 2) Create tables

The default adapters expect these tables:

```sql
create table documents (
  id uuid primary key,
  source_id text not null,
  content text not null,
  metadata jsonb,
  created_at timestamp default now()
);

create table chunks (
  id uuid primary key,
  document_id uuid not null references documents(id) on delete cascade,
  source_id text not null,
  idx integer not null,
  content text not null,
  token_count integer not null,
  metadata jsonb,
  created_at timestamp default now()
);

create table embeddings (
  chunk_id uuid primary key references chunks(id) on delete cascade,
  embedding vector,
  embedding_dimension integer,
  created_at timestamp default now()
);
```

## 3) Recommended indexes

```sql
create index if not exists chunks_source_id_idx on chunks(source_id);
create index if not exists documents_source_id_idx on documents(source_id);
```

## Notes

- **Distance function**: the adapters use pgvector’s `<=>` operator and sort by ascending score (smaller is “closer”).
- **Embedding dimensions**: stored per-row in `embeddings.embedding_dimension` so you can introspect/verify model changes.



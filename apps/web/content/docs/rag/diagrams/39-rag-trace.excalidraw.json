{
	"type": "excalidraw",
	"version": 2,
	"source": "unrag-handbook",
	"elements": [
		{
			"id": "title",
			"type": "text",
			"x": 300,
			"y": 20,
			"width": 250,
			"height": 35,
			"text": "RAG Diagnostic Trace",
			"fontSize": 28,
			"fontFamily": 1,
			"textAlign": "center",
			"strokeColor": "#1e1e1e"
		},
		{
			"id": "trace-line",
			"type": "line",
			"x": 100,
			"y": 100,
			"width": 650,
			"height": 0,
			"strokeColor": "#339af0",
			"strokeWidth": 4,
			"points": [[0, 0], [650, 0]]
		},
		{
			"id": "stage1-dot",
			"type": "ellipse",
			"x": 95,
			"y": 90,
			"width": 20,
			"height": 20,
			"backgroundColor": "#339af0",
			"strokeColor": "#1864ab",
			"fillStyle": "solid"
		},
		{
			"id": "stage1-label",
			"type": "text",
			"x": 60,
			"y": 120,
			"width": 100,
			"height": 25,
			"text": "Query",
			"fontSize": 16,
			"fontFamily": 1,
			"textAlign": "center",
			"strokeColor": "#1e1e1e"
		},
		{
			"id": "stage1-data",
			"type": "rectangle",
			"x": 50,
			"y": 150,
			"width": 120,
			"height": 60,
			"backgroundColor": "#e7f5ff",
			"strokeColor": "#339af0",
			"fillStyle": "solid",
			"strokeWidth": 1
		},
		{
			"id": "stage1-data-text",
			"type": "text",
			"x": 55,
			"y": 160,
			"width": 110,
			"height": 45,
			"text": "query text\npreprocessing\nembedding hash",
			"fontSize": 11,
			"fontFamily": 3,
			"textAlign": "center",
			"strokeColor": "#1864ab"
		},
		{
			"id": "stage2-dot",
			"type": "ellipse",
			"x": 220,
			"y": 90,
			"width": 20,
			"height": 20,
			"backgroundColor": "#339af0",
			"strokeColor": "#1864ab",
			"fillStyle": "solid"
		},
		{
			"id": "stage2-label",
			"type": "text",
			"x": 180,
			"y": 120,
			"width": 100,
			"height": 25,
			"text": "Retrieval",
			"fontSize": 16,
			"fontFamily": 1,
			"textAlign": "center",
			"strokeColor": "#1e1e1e"
		},
		{
			"id": "stage2-data",
			"type": "rectangle",
			"x": 175,
			"y": 150,
			"width": 120,
			"height": 60,
			"backgroundColor": "#e7f5ff",
			"strokeColor": "#339af0",
			"fillStyle": "solid",
			"strokeWidth": 1
		},
		{
			"id": "stage2-data-text",
			"type": "text",
			"x": 180,
			"y": 160,
			"width": 110,
			"height": 45,
			"text": "doc IDs + scores\nfilters applied\nlatency: 45ms",
			"fontSize": 11,
			"fontFamily": 3,
			"textAlign": "center",
			"strokeColor": "#1864ab"
		},
		{
			"id": "stage3-dot",
			"type": "ellipse",
			"x": 360,
			"y": 90,
			"width": 20,
			"height": 20,
			"backgroundColor": "#339af0",
			"strokeColor": "#1864ab",
			"fillStyle": "solid"
		},
		{
			"id": "stage3-label",
			"type": "text",
			"x": 320,
			"y": 120,
			"width": 100,
			"height": 25,
			"text": "Rerank",
			"fontSize": 16,
			"fontFamily": 1,
			"textAlign": "center",
			"strokeColor": "#1e1e1e"
		},
		{
			"id": "stage3-data",
			"type": "rectangle",
			"x": 310,
			"y": 150,
			"width": 120,
			"height": 60,
			"backgroundColor": "#e7f5ff",
			"strokeColor": "#339af0",
			"fillStyle": "solid",
			"strokeWidth": 1
		},
		{
			"id": "stage3-data-text",
			"type": "text",
			"x": 315,
			"y": 160,
			"width": 110,
			"height": 45,
			"text": "reranked order\nnew scores\nlatency: 120ms",
			"fontSize": 11,
			"fontFamily": 3,
			"textAlign": "center",
			"strokeColor": "#1864ab"
		},
		{
			"id": "stage4-dot",
			"type": "ellipse",
			"x": 505,
			"y": 90,
			"width": 20,
			"height": 20,
			"backgroundColor": "#339af0",
			"strokeColor": "#1864ab",
			"fillStyle": "solid"
		},
		{
			"id": "stage4-label",
			"type": "text",
			"x": 465,
			"y": 120,
			"width": 100,
			"height": 25,
			"text": "Context",
			"fontSize": 16,
			"fontFamily": 1,
			"textAlign": "center",
			"strokeColor": "#1e1e1e"
		},
		{
			"id": "stage4-data",
			"type": "rectangle",
			"x": 450,
			"y": 150,
			"width": 120,
			"height": 60,
			"backgroundColor": "#e7f5ff",
			"strokeColor": "#339af0",
			"fillStyle": "solid",
			"strokeWidth": 1
		},
		{
			"id": "stage4-data-text",
			"type": "text",
			"x": 455,
			"y": 160,
			"width": 110,
			"height": 45,
			"text": "chunks selected\ntoken count\ntruncation",
			"fontSize": 11,
			"fontFamily": 3,
			"textAlign": "center",
			"strokeColor": "#1864ab"
		},
		{
			"id": "stage5-dot",
			"type": "ellipse",
			"x": 645,
			"y": 90,
			"width": 20,
			"height": 20,
			"backgroundColor": "#339af0",
			"strokeColor": "#1864ab",
			"fillStyle": "solid"
		},
		{
			"id": "stage5-label",
			"type": "text",
			"x": 600,
			"y": 120,
			"width": 100,
			"height": 25,
			"text": "Generation",
			"fontSize": 16,
			"fontFamily": 1,
			"textAlign": "center",
			"strokeColor": "#1e1e1e"
		},
		{
			"id": "stage5-data",
			"type": "rectangle",
			"x": 590,
			"y": 150,
			"width": 120,
			"height": 60,
			"backgroundColor": "#e7f5ff",
			"strokeColor": "#339af0",
			"fillStyle": "solid",
			"strokeWidth": 1
		},
		{
			"id": "stage5-data-text",
			"type": "text",
			"x": 595,
			"y": 160,
			"width": 110,
			"height": 45,
			"text": "prompt hash\nmodel + params\nlatency: 1.2s",
			"fontSize": 11,
			"fontFamily": 3,
			"textAlign": "center",
			"strokeColor": "#1864ab"
		},
		{
			"id": "trace-id-box",
			"type": "rectangle",
			"x": 300,
			"y": 240,
			"width": 200,
			"height": 40,
			"backgroundColor": "#fff3bf",
			"strokeColor": "#e67700",
			"fillStyle": "solid",
			"strokeWidth": 2
		},
		{
			"id": "trace-id-text",
			"type": "text",
			"x": 310,
			"y": 250,
			"width": 180,
			"height": 25,
			"text": "trace_id: abc123xyz",
			"fontSize": 14,
			"fontFamily": 3,
			"textAlign": "center",
			"strokeColor": "#e67700"
		},
		{
			"id": "note",
			"type": "text",
			"x": 250,
			"y": 295,
			"width": 300,
			"height": 20,
			"text": "Each stage captures structured data for replay",
			"fontSize": 12,
			"fontFamily": 1,
			"textAlign": "center",
			"strokeColor": "#868e96"
		}
	],
	"appState": {
		"viewBackgroundColor": "#ffffff",
		"gridSize": null
	}
}

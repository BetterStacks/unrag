{
	"type": "excalidraw",
	"version": 2,
	"source": "https://excalidraw.com",
	"elements": [
		{
			"id": "title",
			"type": "text",
			"x": 250,
			"y": 20,
			"width": 260,
			"height": 30,
			"text": "Retrieval Diagnostic Trace",
			"fontSize": 20,
			"fontFamily": 1,
			"textAlign": "center"
		},
		{
			"id": "step1-box",
			"type": "rectangle",
			"x": 50,
			"y": 70,
			"width": 180,
			"height": 70,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "#a5d8ff",
			"fillStyle": "solid",
			"strokeWidth": 2,
			"roundness": { "type": 3 }
		},
		{
			"id": "step1-label",
			"type": "text",
			"x": 70,
			"y": 80,
			"width": 140,
			"height": 50,
			"text": "1. Original Query\n\"refund policy\"",
			"fontSize": 14,
			"fontFamily": 1,
			"textAlign": "center"
		},
		{
			"id": "arrow-1-2",
			"type": "arrow",
			"x": 230,
			"y": 105,
			"width": 50,
			"height": 0,
			"points": [[0, 0], [50, 0]],
			"strokeColor": "#1e1e1e",
			"strokeWidth": 2,
			"endArrowhead": "arrow"
		},
		{
			"id": "step2-box",
			"type": "rectangle",
			"x": 290,
			"y": 70,
			"width": 180,
			"height": 70,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "#ffec99",
			"fillStyle": "solid",
			"strokeWidth": 2,
			"roundness": { "type": 3 }
		},
		{
			"id": "step2-label",
			"type": "text",
			"x": 310,
			"y": 80,
			"width": 140,
			"height": 50,
			"text": "2. Rewritten?\n→ \"return policy\"",
			"fontSize": 14,
			"fontFamily": 1,
			"textAlign": "center"
		},
		{
			"id": "arrow-2-3",
			"type": "arrow",
			"x": 470,
			"y": 105,
			"width": 50,
			"height": 0,
			"points": [[0, 0], [50, 0]],
			"strokeColor": "#1e1e1e",
			"strokeWidth": 2,
			"endArrowhead": "arrow"
		},
		{
			"id": "step3-box",
			"type": "rectangle",
			"x": 530,
			"y": 70,
			"width": 180,
			"height": 70,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "#b2f2bb",
			"fillStyle": "solid",
			"strokeWidth": 2,
			"roundness": { "type": 3 }
		},
		{
			"id": "step3-label",
			"type": "text",
			"x": 550,
			"y": 80,
			"width": 140,
			"height": 50,
			"text": "3. Retrieved\ntop-10 chunks",
			"fontSize": 14,
			"fontFamily": 1,
			"textAlign": "center"
		},
		{
			"id": "arrow-3-4",
			"type": "arrow",
			"x": 620,
			"y": 140,
			"width": 0,
			"height": 40,
			"points": [[0, 0], [0, 40]],
			"strokeColor": "#1e1e1e",
			"strokeWidth": 2,
			"endArrowhead": "arrow"
		},
		{
			"id": "step4-box",
			"type": "rectangle",
			"x": 530,
			"y": 190,
			"width": 180,
			"height": 70,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "#ffc9c9",
			"fillStyle": "solid",
			"strokeWidth": 2,
			"roundness": { "type": 3 }
		},
		{
			"id": "step4-label",
			"type": "text",
			"x": 550,
			"y": 200,
			"width": 140,
			"height": 50,
			"text": "4. Filtered\n3 removed (ACL)",
			"fontSize": 14,
			"fontFamily": 1,
			"textAlign": "center"
		},
		{
			"id": "arrow-4-5",
			"type": "arrow",
			"x": 530,
			"y": 225,
			"width": 50,
			"height": 0,
			"points": [[0, 0], [-50, 0]],
			"strokeColor": "#1e1e1e",
			"strokeWidth": 2,
			"endArrowhead": "arrow"
		},
		{
			"id": "step5-box",
			"type": "rectangle",
			"x": 290,
			"y": 190,
			"width": 180,
			"height": 70,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "#d0bfff",
			"fillStyle": "solid",
			"strokeWidth": 2,
			"roundness": { "type": 3 }
		},
		{
			"id": "step5-label",
			"type": "text",
			"x": 310,
			"y": 200,
			"width": 140,
			"height": 50,
			"text": "5. Reranked\ntop-5 selected",
			"fontSize": 14,
			"fontFamily": 1,
			"textAlign": "center"
		},
		{
			"id": "arrow-5-6",
			"type": "arrow",
			"x": 290,
			"y": 225,
			"width": 50,
			"height": 0,
			"points": [[0, 0], [-50, 0]],
			"strokeColor": "#1e1e1e",
			"strokeWidth": 2,
			"endArrowhead": "arrow"
		},
		{
			"id": "step6-box",
			"type": "rectangle",
			"x": 50,
			"y": 190,
			"width": 180,
			"height": 70,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "#e7f5ff",
			"fillStyle": "solid",
			"strokeWidth": 2,
			"roundness": { "type": 3 }
		},
		{
			"id": "step6-label",
			"type": "text",
			"x": 70,
			"y": 200,
			"width": 140,
			"height": 50,
			"text": "6. Packed\n→ LLM context",
			"fontSize": 14,
			"fontFamily": 1,
			"textAlign": "center"
		},
		{
			"id": "question-box",
			"type": "rectangle",
			"x": 50,
			"y": 310,
			"width": 660,
			"height": 100,
			"strokeColor": "#e03131",
			"backgroundColor": "#fff5f5",
			"fillStyle": "solid",
			"strokeWidth": 2,
			"roundness": { "type": 3 }
		},
		{
			"id": "question-title",
			"type": "text",
			"x": 70,
			"y": 320,
			"width": 200,
			"height": 25,
			"text": "Debug questions at each step:",
			"fontSize": 14,
			"fontFamily": 1,
			"textAlign": "left",
			"strokeColor": "#e03131"
		},
		{
			"id": "question-list",
			"type": "text",
			"x": 70,
			"y": 348,
			"width": 620,
			"height": 55,
			"text": "• Was the right content in top-10? → Retrieval issue\n• Was it filtered out? → Permission issue\n• Did reranking demote it? → Reranker issue\n• Was rewrite wrong? → Transformation issue",
			"fontSize": 12,
			"fontFamily": 3,
			"textAlign": "left",
			"strokeColor": "#495057"
		}
	],
	"appState": {
		"viewBackgroundColor": "#ffffff"
	}
}
